<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 关于matrix3D · Miya's Note</title><meta name="description" content="关于matrix3D - Miya Lee"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Miya's Note"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/logo.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="https://github.com/miyalee" target="_blank" class="nav-list-link">GIT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">关于matrix3D</h1><div class="post-info">Jan 19, 2017</div><div class="post-content"><p>前段时间做了个主要功能是获取数据，然后更改并提交的表单。数据量比较大，请求时间大概1秒左右，为了获得更好的体验在请求的时候做了个loading的动效。研究过程中好奇心发作吧matrix和matrix3D撸了一遍<img src="/images/emoticon/79.gif" alt="给你黄瓜" style="display:inline; margin:0;"><br><a id="more"></a><br>这是当时的<a href="https://jsfiddle.net/miyalee/y5h6p86d/" target="_blank" rel="noopener">loading</a><br>不过这个并不是最初版，这个动效的设计和代码都是参考了这个<a href="http://bouncejs.com/" target="_blank" rel="noopener">框架</a>，我分析它的代码的时候发现它用的matrix3D（应该是为了方便生成各种动效）。但是我的动效并没有任何3D相关动作，用那一堆代码简直又臭又长，必须减肥，没得商量。</p>
<p>话说这么说，但是我一菜逼平时没怎么玩过3D动画，对martix3D更是不了解，于是义无反顾的掉进这个坑。</p>
<p>我知道matrix是2D变换，但是要想知道如何用matrix替换matrix3D就要知道这两个函数里面每个参数的含义</p>
<h4 id="matrix"><a href="#matrix" class="headerlink" title="matrix()"></a>matrix()</h4><p>首先看matrix，即</p>
<p><div class="tip">matrix(a, b, c, d, e, f)</div><br>对应到矩阵就是：<br><img src="/images/2d-matrix.gif" alt="2d-matrix"><br><img src="/images/2d-operation.jpg" alt="2d-operation"><br>即<code>ax+cy+e</code>为x的坐标，<code>bx+dy+f</code>为y的坐标，其他不用管</p>
<p>所以做2d移动时设置<code>e,f</code>值即可，做2d缩放设置<code>a,d</code>值，可以自己做推算试试</p>
<h4 id="matrix3D"><a href="#matrix3D" class="headerlink" title="matrix3D()"></a>matrix3D()</h4><p>下面重点说matrix3D()，其实martix3D()就是复杂版martix()，多了一个z坐标轴：</p>
<p><div class="tip">matrix3D(M11, M21, M31, M41, M12, M22, M32, M42, M13, M23, M33, M43, M14, M24, M34, M44)</div><br>对应到矩阵就是：<br><img src="/images/3d-matrix.gif" alt="3d-matrix"><br><img src="/images/3d-operation.gif" alt="3d-operation"></p>
<p>所以3D位移就是：<code>matrix3D(1, 0, 0, Tx, 0, 1, 0, Ty, 0, 0, 1, Tz, 0, 0, 0, 1)</code><br><img src="/images/3d-translate.gif" alt="3d-translate"></p>
<p>3D缩放就是：<code>matrix3D(s, 0, 0, 0, 0, s, 0, 0, 0, 0, s, 0, 0, 0, 0, 1)</code><br><img src="/images/3d-scale.gif" alt="3d-scale"></p>
<p>3D旋转稍复杂些，推算公式在这里：<br><img src="/images/rotate3d-operation.png" alt="rotate3d-operation"><br><img src="/images/rotate3d-operation-params.png" alt="rotate3d-operation-params"><br>我也是坐标轴都画烂了才感觉懂了点<img src="/images/emoticon/51.gif" alt="吐血" style="display:inline; margin:0;"></p>
<p>管他咧，直接看这个：<br>沿x轴旋转：<code>matrix3D(1, 0, 0, 0, 0, cosθ    , -sin, 0, 0, sin, cos, 0, 0, 0, 0, 1)</code><br><img src="/images/rotate-x.gif" alt="rotate-x"></p>
<p>沿y轴旋转：<code>matrix3D(cosθ, 0, sinθ, 0, 0, 1, 0, 0, -sinθ, 0, cosθ, 0, 0, 0, 0, 1)</code><br><img src="/images/rotate-y.gif" alt="rotate-y"><br>(擦，这张图还少个数字，我一定是找的假图。。。)</p>
<p>沿z轴旋转：<code>matrix3D(cosθ, -sinθ, 0, 0, sinθ, cosθ, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)</code><br><img src="/images/rotate-z.gif" alt="rotate-z"></p>
<p>然后立马做了个实验：<br><a href="https://jsfiddle.net/miyalee/hrk99603/" target="_blank" rel="noopener">3D旋转</a></p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>无论是2d动作还是3d动作其实都有更简单容易理解的css3函数，像<code>rotate()</code>，<code>scale()</code>，<code>translate()</code>；对应3d:<code>rotate3d()</code>，<code>scale3d()</code>，<code>translate3d()</code><br>如果你不是强迫症发作，只是想搞定一个动画完全可以用这些没必要用matrix3D折磨自己。不过，万一你感兴趣呢～就酱～</p>
</div></article></div></main><footer><div class="paginator"><a href="/2017/02/03/blog2017-02-03/" class="prev">PREV</a><a href="/2017/01/05/blog2017-01-05/" class="next">NEXT</a></div><div data-thread-key="2017/01/19/blog2017-1-19/" data-title="关于matrix3D" data-url="http://yoursite.com/2017/01/19/blog2017-1-19/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"miyalee"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>© 2016 - 2017 <a href="http://yoursite.com">Miya Lee</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>